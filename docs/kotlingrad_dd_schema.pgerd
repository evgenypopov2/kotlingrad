{"version":"62000","data":{"id":"e969323d-5d55-45ac-b5d8-05f1d407c91d","offsetX":0,"offsetY":0,"zoom":150,"gridSize":15,"layers":[{"id":"7853713b-64a9-4fc0-83c6-cecf26dafcda","type":"diagram-links","isSvg":true,"transformed":true,"models":{"cef39979-f193-4694-9db9-3fb9e3de14d4":{"id":"cef39979-f193-4694-9db9-3fb9e3de14d4","locked":true,"type":"onetomany","selected":false,"source":"0dc1b524-bc7a-48f9-a9df-c0878509e0f1","sourcePort":"838981aa-9bb6-49e7-b848-05c0e6a5ad78","target":"ae8146d1-4c64-4d40-88b6-31ea53136e63","targetPort":"93311884-9557-4969-a8e5-27f6c6f5beb0","points":[{"id":"8f6e7749-948c-446d-b45d-a4a75d6f1005","type":"point","x":245,"y":122},{"id":"9c8bbb99-594d-4691-92b2-22aeda6365e5","type":"point","x":245,"y":445.046875},{"id":"5130d7d4-efb7-4cd6-a1bb-a3895226b92f","type":"point","x":245,"y":445.046875}],"labels":[],"width":1,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)","data":{"local_table_uid":"ae8146d1-4c64-4d40-88b6-31ea53136e63","local_column_attnum":2,"referenced_table_uid":"0dc1b524-bc7a-48f9-a9df-c0878509e0f1","referenced_column_attnum":0}},"a32f5efa-e53a-4e2b-b1bd-896c35999d7f":{"id":"a32f5efa-e53a-4e2b-b1bd-896c35999d7f","locked":true,"type":"onetomany","selected":false,"source":"e9203746-ffb4-4a17-8b17-04ccc61db318","sourcePort":"e130259d-37eb-4e2d-95b1-920f43a25339","target":"ae8146d1-4c64-4d40-88b6-31ea53136e63","targetPort":"978b798f-8eac-4e42-bea3-1108653251d0","points":[{"id":"a85bc150-30ab-4435-bd8f-41c3e247765a","type":"point","x":305,"y":122},{"id":"a9465187-cec7-4f2b-9daa-82830e81cf78","type":"point","x":305,"y":476.0625},{"id":"277c854b-0677-4971-9046-be02b626a06b","type":"point","x":245,"y":476.0625}],"labels":[],"width":1,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)","data":{"local_table_uid":"ae8146d1-4c64-4d40-88b6-31ea53136e63","local_column_attnum":3,"referenced_table_uid":"e9203746-ffb4-4a17-8b17-04ccc61db318","referenced_column_attnum":0}},"f8b26ed8-7191-4db3-a69d-e6638a34dc48":{"id":"f8b26ed8-7191-4db3-a69d-e6638a34dc48","locked":true,"type":"onetomany","selected":false,"source":"0dc1b524-bc7a-48f9-a9df-c0878509e0f1","sourcePort":"838981aa-9bb6-49e7-b848-05c0e6a5ad78","target":"e9203746-ffb4-4a17-8b17-04ccc61db318","targetPort":"886417cf-17b4-4c25-bf47-8e394a783990","points":[{"id":"6bb60ae1-826b-4d48-9cf9-c921582b4dc0","type":"point","x":245,"y":122},{"id":"6bbb1241-4a53-4b1c-a212-3cb3f7899c6c","type":"point","x":245,"y":265.046875},{"id":"9bac6c0c-af18-4d1d-9679-1af242af2094","type":"point","x":305,"y":265.046875}],"labels":[],"width":1,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)","data":{"local_table_uid":"e9203746-ffb4-4a17-8b17-04ccc61db318","local_column_attnum":5,"referenced_table_uid":"0dc1b524-bc7a-48f9-a9df-c0878509e0f1","referenced_column_attnum":0}}}},{"id":"f8028599-d1da-4dc3-9e35-26d3e3f565dd","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"0dc1b524-bc7a-48f9-a9df-c0878509e0f1":{"id":"0dc1b524-bc7a-48f9-a9df-c0878509e0f1","type":"table","selected":true,"x":45,"y":30,"ports":[{"id":"a9b381b0-d375-4f49-8f60-5d8ed78d5bc3","type":"onetomany","x":50,"y":122,"name":"coll-port-0-left","alignment":"left","parentNode":"0dc1b524-bc7a-48f9-a9df-c0878509e0f1","links":[]},{"id":"838981aa-9bb6-49e7-b848-05c0e6a5ad78","type":"onetomany","x":215,"y":122,"name":"coll-port-0-right","alignment":"right","parentNode":"0dc1b524-bc7a-48f9-a9df-c0878509e0f1","links":["cef39979-f193-4694-9db9-3fb9e3de14d4","f8b26ed8-7191-4db3-a69d-e6638a34dc48"]}],"name":"Untitled","color":"rgb(0,192,255)","portsInOrder":[],"portsOutOrder":["a9b381b0-d375-4f49-8f60-5d8ed78d5bc3","838981aa-9bb6-49e7-b848-05c0e6a5ad78"],"otherInfo":{"data":{"name":"person","description":"Пользователи","coll_inherits":[],"hastoasttable":true,"toast_autovacuum_enabled":"x","autovacuum_enabled":"x","primary_key":[{"name":"person_id","comment":"","columns":[{"column":"telegram_id","cid":"c1720"}],"include":[],"cid":"c1719"}],"foreign_key":[],"partition_keys":[],"partitions":[],"partition_type":"range","is_partitioned":false,"columns":[{"name":"telegram_id","is_primary_key":true,"attnum":0,"cltype":"bigint","attlen":null,"attprecision":null,"collspcname":null,"attnotnull":true,"colconstype":"n","attidentity":"a","description":"User ID из телеграм","attoptions":[],"cid":"c1721"},{"name":"fio","is_primary_key":false,"attnum":1,"cltype":"character varying","attlen":"255","min_val_attlen":1,"max_val_attlen":2147483647,"attprecision":null,"attnotnull":true,"colconstype":"n","attidentity":"a","description":"ФИО пользователя","attoptions":[],"cid":"c1722"},{"name":"phone","is_primary_key":false,"attnum":2,"cltype":"character varying","attlen":"255","min_val_attlen":1,"max_val_attlen":2147483647,"attprecision":null,"attnotnull":false,"colconstype":"n","attidentity":"a","description":"Номер(а) телефона(ов)","attoptions":[],"cid":"c1723"},{"name":"role","is_primary_key":false,"attnum":3,"cltype":"character varying","attlen":"10","min_val_attlen":1,"max_val_attlen":2147483647,"attprecision":null,"defval":"CLIENT","attnotnull":true,"colconstype":"n","attidentity":"a","description":"Роль пользователя (CLIENT/ADMIN)","attoptions":[],"cid":"c1724"},{"name":"first_name","is_primary_key":false,"attnum":4,"cltype":"character varying","attlen":"255","min_val_attlen":1,"max_val_attlen":2147483647,"attprecision":null,"attnotnull":false,"colconstype":"n","attidentity":"a","description":"Значение firstName из сообщений Телеграма","attoptions":[],"cid":"c1725"}],"schema":"public"},"note":"","metadata":{"data_failed":false,"is_promise":false,"fillColor":null,"textColor":"#D4D4D4"}}},"e9203746-ffb4-4a17-8b17-04ccc61db318":{"id":"e9203746-ffb4-4a17-8b17-04ccc61db318","type":"table","selected":false,"x":330,"y":30,"ports":[{"id":"e130259d-37eb-4e2d-95b1-920f43a25339","type":"onetomany","x":335,"y":122,"name":"coll-port-0-left","alignment":"left","parentNode":"e9203746-ffb4-4a17-8b17-04ccc61db318","links":["a32f5efa-e53a-4e2b-b1bd-896c35999d7f"]},{"id":"dc205375-86e7-4447-993b-990c0bb8d71e","type":"onetomany","x":500,"y":122,"name":"coll-port-0-right","alignment":"right","parentNode":"e9203746-ffb4-4a17-8b17-04ccc61db318","links":[]},{"id":"886417cf-17b4-4c25-bf47-8e394a783990","type":"onetomany","x":335,"y":265.046875,"name":"coll-port-5-left","alignment":"left","parentNode":"e9203746-ffb4-4a17-8b17-04ccc61db318","links":["f8b26ed8-7191-4db3-a69d-e6638a34dc48"]},{"id":"dae040a2-7610-49bb-afe5-ac53b3fb2af1","type":"onetomany","x":500,"y":265.046875,"name":"coll-port-5-right","alignment":"right","parentNode":"e9203746-ffb4-4a17-8b17-04ccc61db318","links":[]}],"name":"Untitled","color":"rgb(0,192,255)","portsInOrder":[],"portsOutOrder":["e130259d-37eb-4e2d-95b1-920f43a25339","dc205375-86e7-4447-993b-990c0bb8d71e","886417cf-17b4-4c25-bf47-8e394a783990","dae040a2-7610-49bb-afe5-ac53b3fb2af1"],"otherInfo":{"data":{"name":"service_provided","description":"Список предоставляемых услуг","coll_inherits":[],"hastoasttable":true,"toast_autovacuum_enabled":"x","autovacuum_enabled":"x","primary_key":[{"name":"service_pk","columns":[{"column":"service_id","cid":"c1672"}],"include":[],"cid":"c1671"}],"foreign_key":[{"confmatchtype":false,"autoindex":false,"columns":[{"local_column":"executor_telegram_id","referenced":"telegram_id","references_table_name":"person","references":"0dc1b524-bc7a-48f9-a9df-c0878509e0f1","cid":"c1674"}],"confupdtype":"a","confdeltype":"a","cid":"c1673"}],"partition_keys":[],"partitions":[],"partition_type":"range","is_partitioned":false,"columns":[{"name":"service_id","is_primary_key":true,"attnum":0,"cltype":"bigint","attlen":null,"attprecision":null,"collspcname":null,"attnotnull":true,"colconstype":"n","attidentity":"a","description":"Автогенерируемый идентификатор","attoptions":[],"cid":"c1675"},{"name":"name","is_primary_key":false,"attnum":1,"cltype":"character varying","attlen":"255","min_val_attlen":1,"max_val_attlen":2147483647,"attprecision":null,"attnotnull":true,"colconstype":"n","attidentity":"a","description":"Наименование услуги","attoptions":[],"cid":"c1676"},{"name":"duration","is_primary_key":false,"attnum":2,"cltype":"integer","attlen":null,"attprecision":null,"collspcname":null,"defval":"60","attnotnull":true,"colconstype":"n","attidentity":"a","description":"Длительность услуги в минутах","attoptions":[],"cid":"c1677"},{"name":"capacity","is_primary_key":false,"attnum":3,"cltype":"integer","attlen":null,"attprecision":null,"collspcname":null,"defval":"1","attnotnull":true,"colconstype":"n","attidentity":"a","description":"Max кол-во клиентов на сеанс услуги","attoptions":[],"cid":"c1678"},{"name":"price","is_primary_key":false,"attnum":4,"cltype":"bigint","attlen":null,"attprecision":null,"collspcname":null,"defval":"0","attnotnull":true,"colconstype":"n","attidentity":"a","description":"Стоимость услуги в копейках.","attoptions":[],"cid":"c1679"},{"name":"executor_telegram_id","is_primary_key":false,"attnum":5,"cltype":"bigint","attlen":null,"attprecision":null,"collspcname":null,"attnotnull":true,"colconstype":"n","attidentity":"a","description":"telegram_id исполнителя услуги","attoptions":[],"cid":"c1680"}],"schema":"public","unique_constraint":[{"name":"service_name_un","columns":[{"column":"name","cid":"c1682"},{"column":"executor_telegram_id","cid":"c1683"}],"include":[],"cid":"c1681"}]},"note":"","metadata":{"data_failed":false,"is_promise":false,"fillColor":null,"textColor":"#D4D4D4"}}},"ae8146d1-4c64-4d40-88b6-31ea53136e63":{"id":"ae8146d1-4c64-4d40-88b6-31ea53136e63","type":"table","selected":false,"x":45,"y":285,"ports":[{"id":"ee8d981a-6223-4c1b-93da-2c0df829de40","type":"onetomany","x":50,"y":445.046875,"name":"coll-port-2-left","alignment":"left","parentNode":"ae8146d1-4c64-4d40-88b6-31ea53136e63","links":[]},{"id":"93311884-9557-4969-a8e5-27f6c6f5beb0","type":"onetomany","x":215,"y":445.046875,"name":"coll-port-2-right","alignment":"right","parentNode":"ae8146d1-4c64-4d40-88b6-31ea53136e63","links":["cef39979-f193-4694-9db9-3fb9e3de14d4"]},{"id":"e9f9ba0b-23bc-4543-ba74-eaf618ea5a63","type":"onetomany","x":50,"y":476.0625,"name":"coll-port-3-left","alignment":"left","parentNode":"ae8146d1-4c64-4d40-88b6-31ea53136e63","links":[]},{"id":"978b798f-8eac-4e42-bea3-1108653251d0","type":"onetomany","x":215,"y":476.0625,"name":"coll-port-3-right","alignment":"right","parentNode":"ae8146d1-4c64-4d40-88b6-31ea53136e63","links":["a32f5efa-e53a-4e2b-b1bd-896c35999d7f"]}],"name":"Untitled","color":"rgb(0,192,255)","portsInOrder":[],"portsOutOrder":["ee8d981a-6223-4c1b-93da-2c0df829de40","93311884-9557-4969-a8e5-27f6c6f5beb0","e9f9ba0b-23bc-4543-ba74-eaf618ea5a63","978b798f-8eac-4e42-bea3-1108653251d0"],"otherInfo":{"data":{"name":"service_sсhedule","description":"Расписание услуг","coll_inherits":[],"hastoasttable":true,"toast_autovacuum_enabled":"x","autovacuum_enabled":"x","primary_key":[{"name":"schedule_pk","columns":[{"column":"schedule_id","cid":"c1444"}],"include":[],"cid":"c1443"}],"foreign_key":[{"confmatchtype":false,"autoindex":false,"columns":[{"local_column":"customer_telegram_id","referenced":"telegram_id","references_table_name":"person","references":"0dc1b524-bc7a-48f9-a9df-c0878509e0f1","cid":"c1446"}],"confupdtype":"a","confdeltype":"a","cid":"c1445"},{"confmatchtype":false,"autoindex":false,"columns":[{"local_column":"service_id","referenced":"service_id","references_table_name":"service_provided","references":"e9203746-ffb4-4a17-8b17-04ccc61db318","cid":"c1448"}],"confupdtype":"a","confdeltype":"a","cid":"c1447"}],"partition_keys":[],"partitions":[],"partition_type":"range","is_partitioned":false,"columns":[{"name":"schedule_id","is_primary_key":true,"attnum":0,"cltype":"bigint","attlen":null,"attprecision":null,"collspcname":null,"attnotnull":true,"colconstype":"n","attidentity":"a","description":"Автогенерируемый идентификатор","attoptions":[],"cid":"c1449"},{"name":"ins_date","is_primary_key":false,"attnum":1,"cltype":"timestamp with time zone","attlen":null,"min_val_attlen":0,"max_val_attlen":6,"attprecision":null,"collspcname":null,"defval":"CURRENT_TIMESTAMP","attnotnull":true,"colconstype":"n","attidentity":"a","description":"Дата и время вставки записи - с таймзоной для достоверности","attoptions":[],"cid":"c1450"},{"name":"customer_telegram_id","is_primary_key":false,"attnum":2,"cltype":"bigint","attlen":null,"attprecision":null,"collspcname":null,"attnotnull":true,"colconstype":"n","attidentity":"a","description":"telegram_id заказчика услуги ","attoptions":[],"cid":"c1451"},{"name":"service_id","is_primary_key":false,"attnum":3,"cltype":"bigint","attlen":null,"attprecision":null,"collspcname":null,"attnotnull":true,"colconstype":"n","attidentity":"a","description":"Запрошенная услуга","attoptions":[],"cid":"c1452"},{"name":"service_date","is_primary_key":false,"attnum":4,"cltype":"date","attlen":null,"attprecision":null,"collspcname":null,"attnotnull":true,"colconstype":"n","attidentity":"a","description":"Дата запрошенной услуги","attoptions":[],"cid":"c1453"},{"name":"service_time","is_primary_key":false,"attnum":5,"cltype":"date","attlen":null,"attprecision":null,"collspcname":null,"attnotnull":true,"colconstype":"n","attidentity":"a","description":"Время запрошенной услуги","attoptions":[],"cid":"c1454"},{"name":"is_visited","is_primary_key":false,"attnum":6,"cltype":"boolean","attlen":null,"attprecision":null,"collspcname":null,"defval":"false","attnotnull":true,"colconstype":"n","attidentity":"a","description":"Услуга оказана (true/false)","attoptions":[],"cid":"c1455"}],"schema":"public","unique_constraint":[{"name":"schedule_uniq","comment":"Уникальность строки расписания","columns":[{"column":"customer_telegram_id","cid":"c1457"},{"column":"service_id","cid":"c1458"},{"column":"service_date","cid":"c1459"},{"column":"service_time","cid":"c1460"}],"include":[],"cid":"c1456"}]},"note":"","metadata":{"data_failed":false,"is_promise":false,"fillColor":null,"textColor":"#D4D4D4"}}}}}]}}